# æ’ä»¶

## 1.å®šä¹‰

- æ’ä»¶å°±æ˜¯ä¸€ä¸ª```js```æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šåœ¨æ¯æ¬¡åˆ·æ–°é¡µé¢æ—¶éƒ½ä¼šåœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ‰§è¡Œä¸€éã€‚

## 2.ç”¨é€”

- å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“æ—¶(```ElementUI,Vant, axios```ç­‰ )ï¼Œé€šè¿‡æ’ä»¶æ¥é›†æˆåˆ°```Vue```ä¸­

## 3.æ’ä»¶åˆ†ç±»

1. é»˜è®¤æ’ä»¶ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œ
   1. æ³¨å…¥æ’ä»¶: æ’ä»¶æ³¨å…¥åï¼Œå¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼Œå…¸å‹åº”ç”¨åœºæ™¯æ˜¯```axios```çš„å°è£…
   2. ```vue```æ’ä»¶: æ’ä»¶å‡ºå…¥åï¼Œå¯ä»¥ç»“åˆ```vue```è¿›è¡Œè¾…åŠ©å¼€å‘ï¼Œ å…¸å‹åº”ç”¨åœºæ™¯æ˜¯```vantï¼Œelementç­‰uiåº“```
2. å®¢æˆ·ç«¯æ’ä»¶ï¼š åªåœ¨å®¢æˆ·ç«¯è‡ªåŠ¨æ‰§è¡Œçš„æ’ä»¶
3. æœåŠ¡ç«¯æ’ä»¶ï¼š åªåœ¨æœåŠ¡ç«¯è‡ªåŠ¨æ‰§è¡Œçš„æ’ä»¶



## 4.æ¡ˆä¾‹æ¼”ç¤º

**æ¡ˆä¾‹æ¼”ç¤º1-å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ’ä»¶ï¼š**

![image-20211004232135400](images/image-20211004232135400.png).



å®ç°æ€è·¯ï¼š

1. åˆ›å»ºplugins/xxx.js
2. åœ¨nuxt.config.js æ³¨å†Œè¯¥æ’ä»¶
3. é¡¹ç›®å¯åŠ¨è‡ªåŠ¨æ‰§è¡Œæ’ä»¶ï¼Œæ‰“å°å†…å®¹



ä»£ç å®ç°ï¼š

plugins/test.js

```javascript
export default () => {
    let server = process.server ? 'æœåŠ¡å™¨' : 'å®¢æˆ·ç«¯';
    console.log(server);
}
```

nuxt.config.js

```javascript
  plugins: [
    '~/plugins/test'
  ],
```



æ€»ç»“ï¼šåœ¨pluginsç›®å½•ä¸‹åˆ›å»ºçš„æ’ä»¶ï¼Œåœ¨nuxt.config.jsæ³¨å†Œä¹‹åï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œã€‚



**æ¡ˆä¾‹æ¼”ç¤º2-å®¢æˆ·ç«¯æ’ä»¶ï¼š**

![image-20211004233609291](images/image-20211004233609291.png)..







å®ç°æ€è·¯ï¼š

1. åˆ›å»ºplugins/xxx.js
2. åœ¨nuxt.config.js æ³¨å†Œè¯¥æ’ä»¶
3. é¡¹ç›®å¯åŠ¨è‡ªåŠ¨æ‰§è¡Œæ’ä»¶ï¼Œæ‰“å°å†…å®¹



ä»£ç å®ç°ï¼š

plugins/test.js

```javascript
export default () => {
    let server = process.server ? 'æœåŠ¡å™¨' : 'å®¢æˆ·ç«¯';
    console.log(server);
}
```

nuxt.config.js

```javascript
  plugins: [
      {src:'~/plugins/test', mode:'client'}  // å¦‚æœåªåœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“åªéœ€è¦æŠŠmodeï¼š'server'  å¦‚æœå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ‰§è¡Œï¼Œè®¾ç½®modeï¼šâ€™bothâ€˜
  ],
```



æ€»ç»“ï¼š æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹nuxt.config.jsé…ç½®,æ¥è®©æ’ä»¶åªåœ¨æŸä¸€ç«¯æ‰§è¡Œ, å¯¹è±¡å†™æ³•ï¼Œmode:æŒ‡å®šå®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡ç«¯



**æ¡ˆä¾‹æ¼”ç¤º3:Â· ```-vueæ’ä»¶```**



![01-v-tooltipæ’ä»¶](images/01-v-tooltip%E6%8F%92%E4%BB%B6.gif).



å®ç°æ€è·¯ï¼š

1. åœ¨pluginsç›®å½•ä¸‹tooptip.js æ’ä»¶   æ–‡æ¡£åœ°å€ï¼šhttps://www.npmjs.com/package/v-tooltip
2. åœ¨nuxt.config.jsä¸­æ³¨å†Œè¯¥æ’ä»¶
3. åœ¨é¡µé¢ä¸­å½“æˆæŒ‡ä»¤ä½¿ç”¨v-tooltip=â€œæç¤ºå†…å®¹â€



ä»£ç å®ç°ï¼š

plugins/tooptip.js

```javascript
import Vue from 'vue'

import tooltip from 'v-tooltip';

Vue.use(tooltip);
```



nuxt.config.js

```javascript
  plugins: [
    '~/plugins/tooltip'
  ],
```



pages/index.vue

```vue
<template>
  <div class="home">
    <h3 v-tooltip="msg">é¼ æ ‡æ‚¬æµ®æ˜¾ç¤ºæç¤º</h3>
  </div>
</template>

<script>
export default {
  data() {
    return {
      msg: "hell NuxtersğŸ‘",
    };
  },
};
</script>

<style>
* {
  padding: 0;
  margin: 0;
}
.home {
  width: 400px;
  margin: 100px auto;
}
</style>
```



æ€»ç»“ï¼š ```vueæ’ä»¶```ï¼Œéœ€è¦åœ¨pluginsç›®å½•ä¸­çš„xxx.jsä¸­å®šä¹‰ï¼Œéœ€è¦ä½¿ç”¨```Vue.use```æŒ‚è½½æ’ä»¶ï¼Œæœ€ååœ¨nuxt.config.jsæ³¨å†Œåï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨



**æ’ä»¶æ¼”ç¤º4-```axiosæ’ä»¶```ï¼š**



![image-20211005000601464](images/image-20211005000601464.png).



å®ç°æ€è·¯ï¼š

1. åˆ›å»ºplugins/axios.js  æ³¨å…¥api
2. åœ¨nuxt.config.js æ³¨å†Œè¯¥æ’ä»¶
3. åœ¨é¡µé¢ç»„ä»¶ä¸­asyncDataä¸­è°ƒç”¨



ä»£ç å®ç°



plugins/axios.js

```javascript
import axios from 'axios';
export default (context, inject) => {
    axios.defaults.baseURL = 'https://cnodejs.org/api/v1';
    inject('api', {
        getTopics (path) {
            return axios.get(`${path}`);
        }
    });
}
```



pages/index.vue

```vue
<template>
  <div class="home">
    <ul>
      <li v-for="item in topics" :key="item.id"><a href="#">{{ item.title }}</a></li>
    </ul>
  </div>
</template>

<script>
export default {
  async asyncData({ app}) {
    const {
      data: { data: topics },
    } = await app.$api.getTopics("/topics");
    return {
      topics,
    };
  },
};
</script>
```



æ€»ç»“ï¼š ä½¿ç”¨å¯¼å‡ºçš„æ’ä»¶å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°injectï¼Œæ³¨å…¥æ’ä»¶åï¼Œåœ¨nuxt.config.jsä¸­æ³¨å…¥ï¼Œåœ¨é¡µé¢ä¸­å¯ä»¥ä½¿ç”¨è¯¥æ’ä»¶.



**æ¡ˆä¾‹æ¼”ç¤º5-```vant```**

![image-20211005001847126](images/image-20211005001847126.png).





å®ç°æ€è·¯ï¼š

1. åˆ›å»ºplugins/vant.js, æŠŠvantç»„ä»¶æŒ‚è½½åˆ°```Vue```ä¸Šï¼Œ è¦å¼•å…¥å¯¹åº”çš„vantæ ·å¼
2. åœ¨nuxt.config.js æ³¨å†Œ è¯¥æ’ä»¶
3. åœ¨é¡µé¢ä¸­ä½¿ç”¨vantæä¾›çš„ç»„ä»¶



ä»£ç æ¼”ç¤º

plugins/vant.js

```javascript
import Vue from 'vue';
// import vant from 'vant';
import {Button,Grid,GridItem} from 'vant';
import 'vant/lib/index.css';
Vue.use(Button);
Vue.use(Grid);
Vue.use(GridItem);
```



```nuxt.config.js```

```javascript
  plugins: [
   '~/plugins/vant'
  ],
```



æ€»ç»“ï¼š vantç»„ä»¶éœ€è¦å…ˆæŒ‚è½½åˆ°vueä¸Šï¼Œå¼•å…¥å¯¹åº”æ ·å¼ï¼Œ åœ¨nuxt.config.jsæ³¨å†Œåï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨



## 6.æ€»ç»“ï¼š

1.  æ’ä»¶å°±æ˜¯ä¸€ä¸ªJSæ–‡ä»¶
2.  è¿™ä¸ª```js```æ–‡ä»¶è¦å†™åœ¨pluginsç›®å½•
3. æ¯ä¸ªJSæ–‡ä»¶éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œä¸€ä¸‹ï¼Œæ³¨å†Œæ—¶å¯ä»¥æŒ‡å®šåªåœ¨æŸä¸€ç«¯æ‰§è¡Œï¼Œæˆ–è€…ä¸¤ç«¯éƒ½æ‰§è¡Œ
4. æ¯æ¬¡åˆ·æ–°é¡µé¢æ—¶æ’ä»¶ä¸­éƒ½ä¼šé¢„å…ˆæ‰§è¡Œ
5. ç”¨é€”ï¼šåœ¨é¡¹ç›®ä¸­é›†æˆä½¿ç”¨è‡ªå·±çš„åº“æˆ–è€…ç¬¬ä¸‰æ–¹åº“å¯ä»¥ä½¿ç”¨æ’ä»¶

