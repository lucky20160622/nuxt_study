# Nuxt.js ç¬¬ä¸€ç« èŠ‚

## 01.å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“

### 1.1.å®¢æˆ·ç«¯æ¸²æŸ“

 å‰ç«¯çš„JSä»£ç éƒ½æ˜¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹‹å‰å†™çš„Vueçš„ä»£ç éƒ½æ˜¯åœ¨å®¢æˆ·ç«¯è¿è¡Œçš„:

![image-20210721085832514](images/image-20210721085832514.png)

 **å¥½å¤„**ï¼šä»£ç åœ¨å®¢æˆ·çš„æµè§ˆå™¨ä¸­è¿è¡Œï¼Œæ‰€ä»¥æ¶ˆè€—çš„æ˜¯å®¢æˆ·çš„CPUå’Œå†…å­˜ç­‰èµ„æºï¼Œå‡è½»æœåŠ¡å™¨çš„å‹åŠ›ã€‚

 **ç¼ºç‚¹**ï¼šé¡µé¢ä¸­æ²¡æœ‰åˆå§‹æ•°æ®(æŸ¥çœ‹é¡µé¢æºä»£ç å¯ä»¥çœ‹åˆ°å¹¶æ²¡æœ‰æ•°æ®)ï¼Œæ‰€ä»¥**ä¸åˆ©äºSEOä¼˜åŒ–!!!**

â€‹          åŸå› ï¼šé¡µé¢æºä»£ç æ—¶ç©ºçš„ï¼Œæ²¡æœ‰æ•°æ®ï¼Œæ‰€ä»¥ç™¾åº¦ç­‰ç½‘ç«™æŠ“å–åˆ°çš„éƒ½æ˜¯æ²¡æœ‰æ•°æ®çš„ç©ºé¡µé¢ï¼Œè¿™ç§é¡µé¢ä¸å¯èƒ½æ’åˆ°å‰é¢

  å®¢æˆ·ç«¯æ¸²æŸ“çš„ç‰¹ç‚¹ï¼š

-    JSä»£ç æ˜¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„
-   æŸ¥çœ‹æºä»£ç æ—¶ï¼Œçœ‹ä¸åˆ°æ¸²æŸ“å‡ºæ¥çš„æ•°æ®(å› ä¸ºæ•°æ®æ—¶JSè¿è¡Œä¹‹åæ¸²æŸ“å‡ºæ¥çš„ï¼Œæ‰€æœ‰é¡µé¢ä¸­æ—¶æ²¡æœ‰åˆå§‹æ•°æ®çš„!)

### 1.2 ä»€ä¹ˆæ˜¯SEO

â€‹      SEO(æœç´¢å¼•æ“ä¼˜åŒ–)ï¼šè®©æˆ‘ä»¬çš„ç½‘ç«™ï¼Œ åœ¨ç™¾åº¦ï¼Œè°·æ­Œé‡Œæ’åˆ°å‰é¢ï¼

â€‹          æœç´¢å¼•æ“(ç™¾åº¦ï¼Œè°·æ­Œï¼Œå¿…åº”ç­‰)ä¼šä»æ¯ä¸ªç½‘ç«™çš„é¡µé¢ä¸­æŠ“å–æ ¸å¿ƒæ•°æ®åˆ°è‡ªå·±çš„æ•°æ®åº“ä¸­ï¼Œç„¶åå½“æœ‰ç”¨æˆ·åœ¨è¿™äº›ç½‘ç«™ä¸Šæœç´¢ä¸€ä¸ªå…³é”®å­—ï¼Œä¼šé€šè¿‡æŠ“å–ç½‘é¡µçš„å†…å®¹å’Œå…³é”®å­—åŒ¹é…ï¼ŒåŒ¹é…åº¦å¥½çš„æ’åœ¨å‰é¢ã€‚

â€‹      **SEOåŸç†:** 

â€‹		  æœç´¢å¼•æ“é€šè¿‡ä¸€ä¸ªå«åšâ€œçˆ¬è™«â€çš„ç¨‹åºæ¥æŠ“å–æ¯ä¸ªé¡µé¢çš„æ•°æ®ï¼Œä½†æ˜¯æ³¨æ„å®ƒæŠ“å–æ—¶é¡µé¢å¹¶ä¸ä¼šæ‰§è¡ŒJSï¼Œæ‰€ä»¥å¯¹äºå‰é¢çš„é¡µé¢ï¼Œæœç´¢å¼•æ“æŠ“å–ä¸åˆ°ä»»ä½•æ•°æ®ï¼Œæ‰€ä»¥å°±æ— æ³•åœ¨æœç´¢å¼•æ“ä¸­æœç´¢å‡ºæ¥



â€‹       æ€»ç»“ï¼š åœ¨ä½¿ç”¨Vueå¼€å‘é¡¹ç›®æ—¶ï¼Œè¦è§£å†³SEOé—®é¢˜,å°±è¦ä½¿ç”¨SSRï¼ˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼‰



**æˆ‘ä»¬çš„ç½‘ç«™å¦‚ä½•åœ¨ç™¾åº¦é‡Œæ’åé å‰**ï¼Ÿ

- èŠ±é’±

- ä¸èŠ±é’±

  - SSR(æœåŠ¡å™¨ç«¯æ¸²æŸ“) è®©ç™¾åº¦æŠŠæˆ‘ä»¬çš„ç½‘ç«™æ”¶å½•åˆ°ç™¾åº¦çš„æ•°æ®åº“ä¸­

    - ç™¾åº¦æœ‰ä¸€ä¸ªçˆ¬è™«ç³»ç»Ÿï¼Œä¼šè‡ªåŠ¨ä»ç½‘ç«™ä¸­æŠ“å–ç½‘é¡µåˆ°ä»–ä»¬çš„æ•°æ®åº“(ä¸ä¼šæ‰§è¡ŒJSä»£ç )

  - å½“æœ‰äººåœ¨ç™¾åº¦ä¸­æœç´¢æ—¶ï¼Œä¼šåˆ°æ•°æ®åº“ä¸­æ‰¾å‡ºç›¸åº”çš„ç½‘é¡µæ˜¾ç¤º


### 1.3.æœåŠ¡å™¨ç«¯æ¸²æŸ“(SSR)

<table><tr><td bgcolor=#D1EEEE>æœåŠ¡å™¨ç«¯æ¸²æŸ“(SSR: ServerSide Render):åœ¨æœåŠ¡ç«¯è¿è¡Œçš„Vueä»£ç ï¼Œç„¶åå°†ç»“æœè¿”å›ç»™å‰ç«¯</td></tr></table>

![image-20210721092251961](images/image-20210721092251961.png).

**ç”¨é€”**ï¼šè§£å†³SEO

**ç‰¹ç‚¹**: Vueçš„ä»£ç åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼ŒæŠŠè¿è¡Œç»“æœè¿”å›ç»™å‰ç«¯ï¼Œ å‰ç«¯æºä»£ç é‡Œé¢å¯ä»¥æŸ¥çœ‹åˆ°æ•°æ®



**ä»€ä¹ˆæ˜¯Nuxt.js**

* Nuxt.js æ˜¯ä¸€ä¸ªåŸºäº Vue.js çš„**é€šç”¨**åº”ç”¨æ¡†æ¶ã€‚
* é€šè¿‡å¯¹å®¢æˆ·ç«¯/æœåŠ¡ç«¯åŸºç¡€æ¶æ„çš„æŠ½è±¡ç»„ç»‡ï¼ŒNuxt.js ä¸»è¦å…³æ³¨çš„æ˜¯åº”ç”¨çš„ **UI æ¸²æŸ“**ã€‚
* Nuxt.js é¢„è®¾äº†åˆ©ç”¨ Vue.js å¼€å‘**æœåŠ¡ç«¯æ¸²æŸ“**çš„åº”ç”¨æ‰€éœ€è¦çš„å„ç§é…ç½®ã€‚



## 02.å®‰è£…è¿è¡Œç›¸å…³çš„æŒ‡ä»¤

### 2.1 å®‰è£…

   ```javascript
1.  yarn create nuxt-app <é¡¹ç›®å>  
    æˆ–è€…
2.  npx create-nuxt-app <é¡¹ç›®å>
   ```

### 2.2 è¿è¡Œ

  ```javascript
1. cd é¡¹ç›®ç›®å½•
2. yarn dev / npm run dev

æ³¨æ„ï¼š

   å¼€å‘æ—¶:
           yarn dev        npm run dev        --->å¼€å¯å¼€å‘æœåŠ¡å™¨

   å¼€å‘å®Œï¼š
   		   yarn build      npm run build      ---> æ‰“åŒ…
	       yarn start      npm run start      ---> å¼€å¯æ­£å¼æœåŠ¡å™¨

           yarn generate   npm run generate   ---> ç”Ÿæˆé™æ€é¡µ
				ç‰¹ç‚¹ï¼š  1. ç”Ÿæˆdist
                       2. ç”Ÿæˆ.htmlçš„é¡µé¢
  ```

## 03.è„šæ‰‹æ¶é¡¹ç›®ç»“æ„

### 3.1 è¯¦ç»†ç›®å½•ä»‹ç»

![image-20210428102054357](images/image-20210428102054357.png).

| ç›®å½•åç§°       | æè¿°                                                         |
| -------------- | ------------------------------------------------------------ |
| assets         | èµ„æºç›®å½•ï¼Œç”¨äºå­˜æ”¾**éœ€è¦ç¼–è¯‘**çš„é™æ€èµ„æºã€‚ä¾‹å¦‚ï¼šLESSã€SASSç­‰ <br/>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNuxtä½¿ç”¨Webpackè‹¥å¹²åŠ è½½å™¨å¤„ç†ç›®å½•ä¸­çš„æ–‡ä»¶ |
| components     | vueç»„ä»¶ç›®å½•ï¼ŒNuxt.js ä¸ä¼šå¢å¼ºè¯¥ç›®å½•ï¼ŒåŠä¸æ”¯æŒSSR             |
| layouts        | å¸ƒå±€ç»„ä»¶ç›®å½•                                                 |
| pages          | é¡µé¢ç›®å½•ï¼Œæ‰€æœ‰çš„vueè§†å›¾ï¼Œnuxtæ ¹æ®ç›®å½•ç»“æ„è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„è·¯ç”±ã€‚ |
| plugins        | æ’ä»¶ç›®å½•                                                     |
| static         | é™æ€æ–‡ä»¶ç›®å½•ï¼Œ**ä¸éœ€è¦ç¼–è¯‘**çš„æ–‡ä»¶                           |
| store          | vuexç›®å½•                                                     |
| nuxt.config.js | nuxtä¸ªæ€§åŒ–é…ç½®æ–‡ä»¶ï¼Œå†…å®¹å°†è¦†ç›–é»˜è®¤                           |
| package.json   | é¡¹ç›®é…ç½®æ–‡ä»¶                                                 |



### 3.2  é¡µé¢ç»„æˆ

Nuxtä¸­æ¯ä¸ªé¡µé¢éƒ½ç”±ä¸‰ä¸ªå±‚çº§çš„æ–‡ä»¶ç»„æˆ

1. å¸ƒå±€æ–‡ä»¶(æ ¹ç»„ä»¶)ï¼š ä¿å­˜åœ¨layoutsç›®å½•ä¸­ï¼Œæ‰€æœ‰çš„é¡µé¢éƒ½æ˜¯å¸ƒå±€æ–‡ä»¶ä¸­çš„å­ç»„ä»¶
2. é¡µé¢ç»„ä»¶(é¡µé¢)ï¼š ä¿å­˜åœ¨pagesç›®å½•ï¼Œ ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªè·¯ç”±é¡µé¢
3. ç»„ä»¶æ–‡ä»¶(ç»„ä»¶)ï¼š ä¿å­˜åœ¨componentsä¸­ï¼Œåœ¨æ¯ä¸ªé¡µé¢ä¸­ä½¿ç”¨çš„ç»„ä»¶

![image-20210721102326834](images/image-20210721102326834.png).



å¿…è¦æ¡ä»¶ï¼š æ‰€æœ‰é¡µé¢éƒ½æ˜¯ç”±å¸ƒå±€æ–‡ä»¶+ é¡µé¢æ–‡ä»¶ç»„æˆï¼Œ é¡µé¢æ–‡ä»¶ä¸­è¿˜å¯ä»¥æœ‰å¤šä¸ªç»„ä»¶æ–‡ä»¶

#### 3.2.2 å¸ƒå±€æ–‡ä»¶

- æ‰€æœ‰é¡µé¢é»˜è®¤éƒ½ä½¿ç”¨layouts/default.vueåšä¸ºå¸ƒå±€æ–‡ä»¶



 æ¡ˆä¾‹æ¼”ç¤º

![image-20211002220926410](images/image-20211002220926410.png).

å®ç°æ€è·¯ï¼š

1. åˆ›å»ºlayouts/defualt.vueæ–‡ä»¶
2. åˆ›å»ºpages/index.vueæ–‡ä»¶



ä»£ç å®ç°ï¼š

â€‹	layouts/default.vueæ–‡ä»¶

```vue
<template>
   <div class="container">
        <h1>layout Page</h1>
        <Nuxt />
   </div>
</template>
```

pages/index.vue

```vue
<template>
    <div class="home">
        <h3>Home Page</h3>
    </div>
</template>
```



æ€»ç»“ï¼šå¸ƒå±€é¡µé¢åŒ…å«é¡µé¢ç»„ä»¶ï¼Œåœ¨å¸ƒå±€é¡µé¢ä½¿ç”¨<Nuxt/>å†…ç½®ç»„ä»¶å ä½ï¼Œç”¨äºè·¯ç”±åŒ¹é…åˆ°çš„é¡µé¢ç»„ä»¶



#### 3.2.3 é¡µé¢æ–‡ä»¶ 

- é¡µé¢æ–‡ä»¶ä¸­è¿˜å¯ä»¥æœ‰å¤šä¸ªç»„ä»¶æ–‡ä»¶
- å¦‚æœè¦ä¿®æ”¹ä½¿ç”¨çš„å¸ƒå±€æ–‡ä»¶å¯ä»¥åœ¨é¡µé¢ä¸­ä½¿ç”¨ layout:'xxxx'æ¥æŒ‡å®šè¦ä½¿ç”¨çš„å¸ƒå±€æ–‡ä»¶



1.æ¡ˆä¾‹æ¼”ç¤º

![image-20211002221902186](images/image-20211002221902186.png).

2.å®ç°æ€è·¯

1.  åˆ›å»ºlayouts/blog.vueå¸ƒå±€æ–‡ä»¶
2. åˆ›å»ºpages/index.vueæ–‡ä»¶
3. åˆ›å»ºcomponents/Goods.vueç»„ä»¶

3.ä»£ç å®ç°





1. layouts/blog.vue

   ```vue
   <template>
       <div class="blog">
           <h1>Blog layout Page</h1>
           <Nuxt/>
       </div>
   </template>
   ```

2. pages/index.vue

   ```vue
   <template>
       <div class="home">
           <h3>Home Page</h3>
           <Goods />
       </div>
   </template>
   <script>
   export default {
      layout:'blog'
   }
   </script>
   ```

3. components/Goods.vue

   ```vue
   <template>
       <div class="goods">
           <ul>
               <li>ç”µå­äº§å“</li>
               <li>æœè£…</li>
               <li>å®¶ç”µ</li>
           </ul>
       </div>
   </template>
   ```



æ€»ç»“ï¼šå¸ƒå±€æ–‡ä»¶åŒ…å«é¡µé¢ç»„ä»¶ï¼Œé¡µé¢ç»„ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨componentsç›®å½•ä¸‹çš„å¤ç”¨ç»„ä»¶ï¼Œå¯ä»¥åœ¨é¡µé¢ç»„ä»¶ä¸­ä½¿ç”¨layout:xxx.vue æŒ‡å®šå¸ƒå±€æ–‡ä»¶



### 3.3 è‡ªå®šä¹‰é”™è¯¯é¡µé¢

- å¦‚æœå¸ƒå±€æ–‡ä»¶åå«åšerror.vue é‚£ä¹ˆç³»ç»Ÿå‡ºé”™æ—¶ä¼šæ˜¾ç¤ºè¿™ä¸ªé¡µé¢



 1.æ¡ˆä¾‹æ¼”ç¤ºï¼š

![01-erroré¡µé¢](images/01-error%E9%A1%B5%E9%9D%A2.gif).

2.å®ç°æ€è·¯

1. åŸºäº3.2æ¡ˆä¾‹åˆ›å»ºlayouts/error.vueå¸ƒå±€æ–‡ä»¶



   æ€»ç»“ï¼šè·¯ç”±ä¸å­˜åœ¨æ—¶ä¼šè‡ªåŠ¨è·³è½¬layouts/error.vueæ–‡ä»¶,  è¯¥æ–‡ä»¶è™½ç„¶åœ¨layoutsç›®å½•ä¸‹ï¼Œä½†æ˜¯è¦çœ‹æˆæ˜¯é¡µé¢ç»„ä»¶ï¼Œé»˜è®¤ç»§æ‰¿default.vueå¸ƒå±€æ–‡ä»¶



## 04.è·¯ç”±

-  Nuxtä¸­å·²ç»å†…ç½®äº†vue-routerç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥ä½¿ç”¨å³å¯ï¼Œè€Œä¸”ä¸éœ€è¦å†™ä»»ä½•ä»£ç ã€‚
- åœ¨Nuxtä¸­ä¸éœ€è¦è‡ªå·±é…ç½®è·¯ç”±ï¼ŒNuxtä¼šæ ¹æ®pagesç›®å½•ä¸­çš„æ–‡ä»¶ç»“æ„è‡ªåŠ¨ç”Ÿæˆè·¯ç”±çš„é…ç½®

###    1.è·¯ç”±åˆä½“éªŒ

![01-routing](images/01-routing.gif).

 1.1 å®ç°æ€è·¯

â€‹      åœ¨pagesç›®å½•ä¸‹æ–°å»ºå¦‚ä¸‹ä¸¤ä¸ªvueæ–‡ä»¶

-  index.vue
- about.vue

 1.2.ä»£ç 

â€‹		æ–‡ä»¶ï¼špages/index.vue

```javascript
<template>
  <div class="home">
    <h1>é¦–é¡µ</h1>
    <nuxt-link to="/about">è·³è½¬åˆ°å…³äºé¡µé¢</nuxt-link>
  </div>
</template>

<script>
export default {
  asyncData() {
    return {
      rendering: process.server ? "server" : "client",
    };
  },
};
</script>
```

â€‹       æ–‡ä»¶ï¼š pages/about.vue

```javascript
<template>
  <div class="about">
    <h1>å…³äºé¡µé¢</h1>
    <nuxt-link to="/">è·³è½¬åˆ°é¦–é¡µ</nuxt-link>
  </div>
</template>

<script>
export default {
  asyncData() {
    return {
      rendering: process.server ? "server" : "client",
    };
  },
};
</script>
```

### 2.è·¯ç”±åˆ‡æ¢æ¿€æ´»ç±»å

â€‹      ç›®æ ‡ï¼šå½“å‰è·¯ç”±é€‰ä¸­å<nuxt-link>ç»„ä»¶ä¼šè‡ªå¸¦æ¿€æ´»ç±»å

- nuxt-link-active  æ¨¡ç³ŠåŒ¹é…
- nuxt-link-exact-active ç²¾ç¡®åŒ¹é…

####    1.æ¡ˆä¾‹æ¼”ç¤º

![03-æ¿€æ´»è·¯ç”±](images/03-%E6%BF%80%E6%B4%BB%E8%B7%AF%E7%94%B1.gif).



2.å®ç°æ€è·¯

1. åˆ›å»ºlayouts/default.vue å¸ƒå±€æ–‡ä»¶å­˜æ”¾<nuxt-link>å¯¼èˆªç»„ä»¶ å’Œ<Nuxt/>å ä½ç»„ä»¶
2. åˆ›å»ºpages/index.vueå’Œpages/about.vueç»„ä»¶ 



3.ä»£ç å®ç°

layouts/default.vue

```vue
<template>
  <div>
    <nav>
      <ul>
        <li>
          <NuxtLink to="/">Home</NuxtLink>
        </li>
        <li>
          <NuxtLink to="/about">About Page</NuxtLink>
        </li>
      </ul>
    </nav>
    <main>
      <!-- <img src="~/assets/logo.svg" /> -->
      <Nuxt />
    </main>
  </div>
</template>

<style>
a {
  text-decoration: none;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,
    Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji,
    Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
  margin: 0;
}

main {
  margin: 0 auto;
  padding: 0 1rem;
  margin-top: 100px;
  max-width: 1280px;
  text-align: center;
}
img {
  margin-bottom: 1rem;
}

ul {
  list-style-type: none;
  padding: 0;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
}
li {
  margin: 0 0.5rem;
  padding: 0.25rem;
  font-size: 1.2rem;
}

nav {
  padding: 0 1rem;
}
</style>

```

æ¿€æ´»æ ·å¼

```css
a.nuxt-link-active {
  font-weight: bold;
}
a.nuxt-link-exact-active {
  color: #00c58e;
}
```



pages/index.vue

```vue
<template>
  <div>
    <h1>Hello Nuxters! ğŸ‘‹</h1>
  </div>
</template>
```



pages/about.vue

```vue
<template>
  <div>
    <h1>About Page</h1>
  </div>
</template>

```

æ€»ç»“: <nuxt-link>ç»„ä»¶ç‚¹å‡»åä¼šè‡ªå¸¦æ¿€æ´»ç±»å  1.nuxt-link-active æ¨¡ç³ŠåŒ¹é…  2.nuxt-link-exact-active æ¨¡ç³ŠåŒ¹é… 



### 4.1.è·¯å¾„å’Œæ–‡ä»¶çš„å…³ç³»

â€‹        ä¸éœ€è¦è‡ªå·±å†™é…ç½®æ–‡ä»¶ï¼Œç›´æ¥å’Œæ–‡ä»¶åç›´æ¥å¯¹åº”.

| æ–‡ä»¶                 | å¯¹åº”è·¯å¾„             |
| -------------------- | -------------------- |
| pages/index.vue      | /                    |
| pages/login.vue      | /login               |
| pages/user/order.vue | /user/order          |
| pages/good/index.vue | /good(çœç•¥index.vue) |

æ³¨æ„:åœ¨Nuxtä¸­ä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªè·¯å¾„ï¼Œå¦‚æœæ–‡ä»¶åæ—¶pages/index.vue, é‚£ä¹ˆè·¯å¾„å¯ä»¥çœç•¥

### 4.2.è·¯ç”±å‚æ•°

å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨è·¯ç”±ä¸Šä¼ å‚æ•°ï¼Œè·¯ç”±ä¸Šçš„å‚æ•°æœ‰ä¸¤ç§

- è·¯å¾„å‚æ•°ï¼š/goods/100
- æŸ¥è¯¢å‚æ•°: /goods?id=100

#### 4.2.1 è·¯å¾„å‚æ•°

â€‹		ä¸ºäº†èƒ½å¤Ÿé…ç½®è·¯å¾„å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä»¥_åšä¸ºæ–‡ä»¶åçš„å‰ç¼€ï¼Œæ¯”å¦‚:

åŒ¹é…æ–¹å¼:

##### æ–¹å¼1ï¼šæŸ¥è¯¢å‚æ•°

| è·¯å¾„                     | å¯¹åº”æ–‡ä»¶        | é¡µé¢ä¸­æ¥å—                        |
| ------------------------ | --------------- | --------------------------------- |
| /goods?id=100            | pages/goods.vue | $route.query.id                   |
| /goods/?id=12&sort=apple | pages/goods.vue | $route.query.id/$route.query.sort |
|                          |                 |                                   |

1.æ¡ˆä¾‹æ¼”ç¤ºï¼š

![03-è·¯ç”±æŸ¥è¯¢å‚æ•°](images/03-%E8%B7%AF%E7%94%B1%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0.gif).

2.ä»£ç å®ç°

â€‹      åˆ›å»ºæ–‡ä»¶ï¼špages/index.vue

```vue
<template>
  <div>
    <h1>home page</h1>
    <nuxt-link to="/goods?id=100&sort=apple">goods</nuxt-link>
  </div>
</template>
```

â€‹    åˆ›å»ºæ–‡ä»¶: pages/goods.vue

    ```vue
    <template>
       <div>
            <h1>goods page</h1>
            <p>è·å–æŸ¥è¯¢å‚æ•°id: {{ $route.query.id }}</p>
            <p>è·å–æŸ¥è¯¢å‚æ•°sort: {{ $route.query.sort }}</p>
            <nuxt-link to="/">index</nuxt-link>
       </div>
    </template>
    ```

##### æ–¹å¼2ï¼šè·¯å¾„å‚æ•°

| è·¯å¾„           | å¯¹åº”æ–‡ä»¶           | é¡µé¢ä¸­æ¥å—                          |
| -------------- | ------------------ | ----------------------------------- |
| /goods/100     | /goods/_id.vue     | $route.params.id                    |
| /goods/100     | /goods/_i.vue      | $route.params.i                     |
| /goods/100/200 | /goods/\_cid/\_gid | $route.params.cid/$route.params.gid |

1.æ¡ˆä¾‹æ¼”ç¤º

![04-è·¯ç”±è·¯å¾„å‚æ•°](images/04-%E8%B7%AF%E7%94%B1%E8%B7%AF%E5%BE%84%E5%8F%82%E6%95%B0.gif).

2.ä»£ç å®ç°

â€‹      æ€è·¯æ­¥éª¤ï¼š

1. åˆ›å»ºpages/good/_id.vue  æ¥å—ä¸€ä¸ªè·¯å¾„å‚æ•°id
2. åˆ›å»ºpages/good/_____cid/_gid.vue æ¥å—ä¸¤ä¸ªè·¯ç”±å‚æ•°cidå’Œgid

â€‹     

â€‹       åˆ›å»ºpages/goods/_id.vue

```vue
<template>
   <div>
        <h1>goods/_id page</h1>
         <p>è·å–æŸ¥è¯¢å‚æ•°id: {{ $route.params.id }}</p>
        <nuxt-link to="/">index</nuxt-link>
   </div>
</template>
```

â€‹    åˆ›å»ºpages/good/_____cid/_gid.vue 

```vue
<template>
   <div>
        <h1>goods/_cid/_gid page</h1>
         <p>è·å–æŸ¥è¯¢å‚æ•°cid: {{ $route.params.cid }}</p>
         <p>è·å–æŸ¥è¯¢å‚æ•°gid: {{ $route.params.gid }}</p>
        <nuxt-link to="/">index</nuxt-link>
   </div>
</template>
```

æ€»ç»“ï¼š

   ä½¿ç”¨åŒºåˆ«ï¼š

- æŸ¥è¯¢å‚æ•°?  ä¸åˆ©äºSEO,  ç™¾åº¦å†æŠ“å–æˆ‘ä»¬é¡µé¢æ—¶ï¼Œå¦‚æœç”¨?  åªä¼šæŠ“å–ä¸€ä¸ªé¡µé¢ 
  - content/?id=1
  - content/?id=2
  - content/?id=3
- æ¨èä½¿ç”¨è·¯å¾„å‚æ•° 

### 4.3.åµŒå¥—è·¯ç”±

   1.æ¡ˆä¾‹æ¼”ç¤º

![05-åµŒå¥—è·¯ç”±](images/05-%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1.gif).

â€‹    2.æ€è·¯åˆ†æï¼š

- åˆ›å»ºä¸€ä¸ªå¸ƒå±€æ–‡ä»¶  layouts/default.vue   -->  æ˜¾ç¤ºä¸€çº§è·¯ç”±ï¼Œæ”¾ä¸€ä¸ª<Nuxt/>ç»„ä»¶, å­˜æ”¾ä¸€çº§è·¯ç”±åŒ¹é…åˆ°çš„é¡µé¢       
- åˆ›å»ºä¸€ä¸ªé¡µé¢æ–‡ä»¶ pages/parent.vue        ---> é¡µé¢ä¸­æ”¾ä¸€ä¸ª<nuxt-child/>ç»„ä»¶,å­˜æ”¾äºŒçº§è·¯ç”±åŒ¹é…åˆ°çš„é¡µé¢
- å†åˆ›å»ºä¸€ä¸ªç›®å½•     pages/parent               --->  æ‰€æœ‰parentè·¯ç”±ä¸‹çš„å­æ–‡ä»¶é¡µé¢æ”¾åˆ° parentç›®å½•ä¸­     

3.ä»£ç å®ç°

   1.åˆ›å»ºä¸€ä¸ªå¸ƒå±€æ–‡ä»¶ layouts/default.vue

```vue
<template>
  <div>
    <nav class="nav">
      <ul>
        <li>
          <!-- <NuxtLink to="/">Home</NuxtLink> -->
          <span :class="{active:active}" @click="go('/')">Home</span>
        </li>
        <li>
          <!-- <NuxtLink to="/parent">Parent</NuxtLink> -->
           <span :class="{active:!active}" @click="go('/parent')">Parent</span>
        </li>
      </ul>
    </nav>
    <main>
      <Nuxt />
    </main>
  </div>
</template>

<script>
export default  {
   data () {
      return {
        active:true
      }
   },
   methods:{
     go (path) {
       this.active = !this.active;
       this.$router.push({
         path
       })
     }
   }
}
</script>


<style>
:root {
  --primary-color: #00c58e;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,
    Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji,
    Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
  margin: 0;
}

a {
  color: inherit;
  text-decoration: none;
}
nav a:hover {
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

main {
  margin: 0 auto;
  margin-top: 100px;
  padding: 0 1rem;
  max-width: 1280px;
  text-align: center;
}

img {
  margin-bottom: 1rem;
}

ul {
  list-style-type: none;
  padding: 0;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
}
li {
  margin: 0 0.5rem;
  padding: 0.25rem;
  font-size: 1.2rem;
}

nav {
  padding: 0 1rem;
}
.nuxt-link-exact-active,.active {
  color: #00c58e;
}
</style>

```

   2.åˆ›å»ºpages/index.vueæ–‡ä»¶

```vue
<template>
  <div>
      <h1>hello Nuxtjs</h1>
  </div>
</template>
```

3.åˆ›å»ºpages/parent.vueæ–‡ä»¶

```vue
<template>
   <div>
       <h1>parenté¡µé¢(äºŒçº§è·¯ç”±)</h1>
       <nav>
           <ul>
               <li><nuxt-link to="/parent/child1">Chind1</nuxt-link></li>
               <li><nuxt-link to="/parent/child2">Chind2</nuxt-link></li>
           </ul>
       </nav>
       <NuxtChild/>
   </div>
</template>
```

4.åˆ›å»ºpages/parent/child1.vue  

 ```vue
 <template>
   <div>
       <h1>parenté¡µé¢çš„ç¬¬ä¸€å­é¡µé¢(ä¸‰çº§è·¯ç”±)</h1>
       <p>è·¯ç”±ï¼š{{ $route.path }}</p>
   </div>
 </template>
 ```

5.åˆ›å»ºpages/parent/child2.vue

```vue
<template>
  <div>
    <h1>parenté¡µé¢ç¬¬äºŒä¸ªå­é¡µé¢(ä¸‰çº§è·¯ç”±)</h1>
    <p>è·¯ç”±:{{ $route.path }}</p>
  </div>
</template>
```

6.åˆ›å»ºpages/parent/index.vue

```vue
<template>
   <div>
       <p>ç‚¹å‡»ä¸Šé¢çš„é“¾æ¥</p>
   </div>
</template>
```



æ€»ç»“ï¼š

             1. åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ä½¿ç”¨<Nuxt/>ç»„ä»¶å ä½, å­˜æ”¾ä¸€çº§è·¯ç”±é¡µé¢ï¼Œåœ¨ä¸€çº§è·¯ç”±é¡µé¢ä½¿ç”¨<NuxtChild/>å­˜æ”¾äºŒçº§è·¯ç”±é¡µé¢
                2. <nuxt-link>ç»„ä»¶è‡ªå¸¦æ¿€æ´»ç±»å(è·¯ç”±åŒ¹é…åˆ°æ—¶)  æ¨¡ç³ŠåŒ¹é…ç±»å:nuxt-link-activeï¼Œ ç²¾ç¡®åŒ¹é…ç±»åï¼šnuxt-link-exact-active



### 4.4 è¿‡åº¦å’ŒåŠ¨ç”»

æ–‡æ¡£ï¼šhttps://nuxtjs.org/docs/features/transitions/

####         1.æ¦‚å¿µï¼š

â€‹				Nuxt.js ä½¿ç”¨vue [è¿‡æ¸¡ç»„ä»¶](http://vuejs.org/v2/guide/transitions.html#Transitioning-Single-Elements-Components)åœ¨è·¯ç”±åˆ‡æ¢æ—¶åˆ›å»ºè¿‡æ¸¡/åŠ¨ç”»ã€‚



#### 2.ç‰¹ç‚¹

- Nuxt.js é»˜è®¤è¿‡æ¸¡åç§°æ˜¯ `page`
- è®¾ç½®è‡ªå®šä¹‰åŠ¨ç”»ï¼Œ ä½¿ç”¨transitionå±æ€§åœ¨é¡µé¢ä¸­è‡ªå®šä¹‰åŠ¨ç”»åç§°
- è®¾ç½®åŠ¨ç”»æ ·å¼æ³¨æ„ä»¥è‡ªå®šä¹‰çš„åŠ¨ç”»åç§°å¼€å¤´è®¾ç½®ï¼Œæ¯”å¦‚bounce




cssè¿‡åº¦:

![image-20211003000021842](images/image-20211003000021842.png).

#### 3.æ¡ˆä¾‹æ¼”ç¤º

![02-è¿‡åº¦å’ŒåŠ¨ç”»](images/02-%E8%BF%87%E5%BA%A6%E5%92%8C%E5%8A%A8%E7%94%BB.gif).

å®ç°æ€è·¯ï¼š

1. åˆ›å»ºå¸ƒå±€æ–‡ä»¶layouts/defaults.vue å­˜æ”¾å¯¼èˆª
2. pagesç›®å½•ä¸‹åˆ†åˆ«åˆ›å»ºä¸‰ä¸ªé¡µé¢ç»„ä»¶
3. è·¯ç”±åŒ¹é…çš„é¡µé¢ç»„ä»¶ä¼šè‡ªåŠ¨æ·»åŠ ç±»å  .page-enter .page-enter-active  .page-leave .page-leave-active  ç»™å…¶æ·»åŠ æ ·å¼  



ä»£ç å®ç°ï¼š

layouts/default.vueï¼ˆç›´æ¥å¤åˆ¶æ¨¡æ¿ï¼‰

```vue
<template>
  <div class="container">
    <nav>
      <ul>
        <li><nuxt-link to="/">Home</nuxt-link></li>
        <li><nuxt-link to="/fade">Fade</nuxt-link></li>
        <li><nuxt-link to="/bounce">Bounce</nuxt-link></li>
      </ul>
    </nav>
    <main>
      <Nuxt />
    </main>
  </div>
</template>

<style scoped>

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,
    Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji,
    Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
  margin: 0;
}

nav a {
  color: inherit;
  text-decoration: none;
}

a.nuxt-link-exact-active {
  color: #00c58e;
}

main {
  margin: 0 auto;
  margin-top: 50px;
  padding: 0 1rem;
  max-width: 1280px;
  text-align: center;
}

ul {
  list-style-type: none;
  padding: 0;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
}
li {
  margin: 0 0.5rem;
  padding: 0.25rem;
  font-size: 1.2rem;
}

nav {
  padding: 0 1rem;
}
</style>
```



layouts/default.vue æ·»åŠ åŠ¨ç”»æ ·å¼

```css
/* è¿‡åº¦å¼€å§‹å‰å’Œè¿‡åº¦ç»“æŸåéšè— */
.page-enter,.page-leave-to {
   opacity: 0;
}
/* è¿‡åº¦æ¿€æ´»çŠ¶æ€æ˜¾ç¤º */
.page-enter-active, .page-leave-active {
   transition:opacity 0.5s;
}

/* è‡ªå®šä¹‰åŠ¨ç”» åŠ¨ç”»è¿›å…¥å‰*/
.bounce-enter-active {
   transform-origin: top;
   animation: bounce-in 0.8s;
}

/* åŠ¨ç”»ç»“æŸå */
.bounce-leave-active {
   transform-origin: top;
   animation: bounce-out 0.5s;
}

@keyframes bounce-in {
   0% {
      transform:scale(0)
   }

   50% {
      transform:scale(1.25)
   }

   100% {
      transform:scale(1)
   }
}

@keyframes bounce-out {
    0% {
       transform:scale(1)
    }

    50% {
       transform:scale(1.25)
    }

    100% {
       transform:scale(0)
    }
}
```



pages/index.vue

```vue
<template>
    <div class="home">
       <h1>Hello Nuxters! ğŸ‘</h1>
    </div>
</template>
```

pages/fade.vue

```vue
<template>
    <div class="fade">
        <h1>Fade Transtion</h1>
    </div>
</template>
```



pages/bounce.vue

```vue
<template>
    <div class="bounce">
        <h1>Bounce Transtion</h1>
    </div>
</template>

<script>
export default {
    transition:'bounce'
}
</script>
```



æ€»ç»“ï¼š nuxtè¿‡åº¦å’ŒåŠ¨ç”»ä½¿ç”¨vueçš„<transition>ç»„ä»¶ï¼Œåªéœ€è¦ç»™å¯¹åº”æ¿€æ´»ç±»åæ·»åŠ æ ·å¼å³å¯



## 05.asyncData

â€‹        Nuxt.js æ‰©å±•äº† Vue.jsï¼Œå¢åŠ äº†ä¸€ä¸ªå« `asyncData` çš„æ–¹æ³•ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨è®¾ç½®ç»„ä»¶çš„æ•°æ®ä¹‹å‰èƒ½å¼‚æ­¥è·å–æˆ–å¤„ç†æ•°æ®ã€‚

###       1. asyncDataå‡½æ•°ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ

- åªèƒ½ç”¨åœ¨é¡µé¢æ–‡ä»¶ä¸­(pageç›®å½•ä¸‹çš„æ–‡ä»¶ä¸­)
- åœ¨è·å–é¡µé¢åˆå§‹åŒ–å¼‚æ­¥æ•°æ®æ—¶ä½¿ç”¨

###       2. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒ?

- åœ¨è¿™é‡Œè·å–çš„æ•°æ®ä¼šæ˜¾ç¤ºåœ¨é¡µé¢æºä»£ç ä¸­ï¼Œæœ‰åˆ©äºSEO~ 

###       3.æœ‰å“ªäº›ç‰¹ç‚¹

- éœ€è¦return ä¸€ä¸ªæ•°æ®ï¼Œç„¶åè¿™ä¸ªæ•°æ®å¯ä»¥åœ¨é¡µé¢ä¸­ä½¿ç”¨
- æœ‰å¾ˆå¤šå‚æ•°ï¼š æ¯”å¦‚ query, params ,routeç­‰
- å®ƒå¯ä»¥åœ¨æœåŠ¡ç«¯æˆ–è·¯ç”±æ›´æ–°ä¹‹å‰è¢«è°ƒç”¨
  - asnycData å‡½æ•°é»˜è®¤åœ¨æœåŠ¡ç«¯æ¸²æŸ“
  - asnycData å‡½æ•°åœ¨å½“å‰æ‰€åœ¨é¡µé¢åˆ·æ–°ååœ¨æœåŠ¡ç«¯æ¸²æŸ“
  - asyncData å‡½æ•°åœ¨è·¯ç”±è·³è½¬æ—¶åœ¨å®¢æˆ·ç«¯æ¸²æŸ“

### 4.ä½¿ç”¨æ–¹å¼

#### 4.1 returnæ•°æ®

1.é¡µé¢æ•ˆæœ

![.](images/image-20211003005913569.png).

2.ä»£ç æ¼”ç¤º

```vue
<template>
     <div class="home">
         <h1>{{ msg }}</h1>
     </div>
</template>

<script>
export default {
    asyncData () {
        return {
            msg:'hello nuxt.js'
        }
    }
}
</script>
```

æ€»ç»“ï¼šNuxt.js ä¼šå°† `asyncData` è¿”å›çš„æ•°æ®èåˆç»„ä»¶ `data` æ–¹æ³•è¿”å›çš„æ•°æ®ä¸€å¹¶è¿”å›ç»™å½“å‰ç»„ä»¶ã€‚

#### 4.2 è¿”å› promise,

æ¥å£åœ°å€ï¼šhttps://cnodejs.org/api/topics    get

1.æ¡ˆä¾‹æ¼”ç¤º

![image-20211001190312448](images/image-20211001190312448.png).

2.ä»£ç å®ç°

```VUE
<template>
  <div class="home">
    <ul>
      <li v-for="item in list" :key="item.id"><a href="#">{{ item.title }}</a></li>
    </ul>
  </div>
</template>

<script>
import axios from "axios";
export default {
  asyncData() {
    return axios.get("https://cnodejs.org/api/v1/topics").then((res) => {
      console.log(res.data.data, "res");
      return {
        list: res.data.data,
      };
    });
  },
};
</script>
```

3.ä½¿ç”¨async await 

```vue
<template>
  <div class="home">
    <ul>
      <li v-for="item in list" :key="item.id">
        <a href="#">{{ item.title }}</a>
      </li>
    </ul>
  </div>
</template>

<script>
import axios from "axios";
export default {
  async asyncData() {
    const {
      data: { data: list },
    } = await axios.get("https://cnodejs.org/api/v1/topics");
    return {
      list,
    };
  },
};
</script>
```



æ€»ç»“ï¼šnuxt.js ä¼šç­‰å¾…è¯¥`Promise`è¢«è§£æä¹‹åæ‰ä¼šè®¾ç½®ç»„ä»¶çš„æ•°æ®ï¼Œä»è€Œæ¸²æŸ“ç»„ä»¶.



### 5.æ¡ˆä¾‹æ¼”ç¤º

  1.æ¡ˆä¾‹æ¼”ç¤º

![02-routing](images/02-routing.gif)

2.ä»£ç 

â€‹       pages/index.vue

```vue
<template>
  <div class="home">
    <h1>é¦–é¡µ</h1>
    <div v-if="rendering == 'server'">
      <p>é¡µé¢æ¸²æŸ“åœ¨ <strong>{{ rendering }}</strong> </p>
      <p>é¡µé¢åˆ·æ–°åæ¸²æŸ“åœ¨ <strong>{{ rendering }}</strong> </p>
    </div>
    <p v-if="rendering == 'client'">é¡µé¢è·³è½¬åæ¸²æŸ“åœ¨{{ rendering }}</p>
    <h3>åˆ·æ–°é¡µé¢åå†çœ‹æ•ˆæœ</h3>
    <nuxt-link to="/about">è·³è½¬åˆ°å…³äºé¡µé¢åå†çœ‹æ•ˆæœ</nuxt-link>
  </div>
</template>

<script>
export default {
  asyncData() {
    return {
      rendering: process.server ? "server" : "client",
    };
  },
};
</script>

```

   pages/about.vue

```vue
<template>
  <div class="about">
    <h1>å…³äºé¡µé¢</h1>
    <div v-if="rendering == 'server'">
      <p>é¡µé¢æ¸²æŸ“åœ¨ <strong>{{ rendering }}</strong> </p>
      <p>é¡µé¢åˆ·æ–°åæ¸²æŸ“åœ¨ <strong>{{ rendering }}</strong> </p>
    </div>
    <p v-if="rendering == 'client'">é¡µé¢è·³è½¬åæ¸²æŸ“åœ¨{{ rendering }}</p>
    <h3>åˆ·æ–°é¡µé¢åå†çœ‹æ•ˆæœ</h3>
    <nuxt-link to="/">è·³è½¬åˆ°é¦–é¡µå†çœ‹æ•ˆæœ</nuxt-link>
  </div>
</template>

<script>
export default {
  asyncData() {
    return {
      rendering: process.server ? "server" : "client",
    };
  },
};
</script>
```



æ€»ç»“ï¼šasyncDataå‡½æ•°åœ¨é¡µé¢åˆ·æ–°æˆ–è€…è·¯ç”±è·³è½¬æ—¶éƒ½ä¼šè§¦å‘ï¼Œåˆ·æ–°åœ¨æœåŠ¡ç«¯è§¦å‘ï¼Œè·¯ç”±åˆ‡æ¢åœ¨å®¢æˆ·ç«¯è§¦å‘



### 6.æœåŠ¡å™¨ç«¯è¿è¡Œ

Nuxtä¸ºäº†å®ç°SSRï¼Œåœ¨åŸVUEä¸­æ·»åŠ äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½éƒ½ä¼šåœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œ

#### 1.æœåŠ¡ç«¯æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸ

| åŠŸèƒ½                   | æ‰§è¡Œçš„ä½ç½®          |
| ---------------------- | ------------------- |
| ä¸­é—´ä»¶                 | æœåŠ¡å™¨ æˆ–è€…è·¯ç”±æ›´æ–° |
| asyncData              | æœåŠ¡å™¨æˆ–è€…è·¯ç”±æ›´æ–°  |
| fetch                  | æœåŠ¡å™¨æˆ–è€…è·¯ç”±æ›´æ–°  |
| beforeCreated, created | æœåŠ¡å™¨æˆ–è€…è·¯ç”±æ›´æ–°  |
| nuxtServerInt          | æœåŠ¡å™¨ç«¯            |

##### 1.1åŒºåˆ†ä»£ç æ‰§è¡Œçš„ä½ç½®

######   1. console.log()

  æˆ‘ä¹ˆå¯ä»¥ä½¿ç”¨console.log()æ¥æ‰“å°æ•°æ®ï¼Œä»¥æ­¤æŸ¥çœ‹ä»£ç æ‰§è¡Œçš„ä½ç½®

  ä¸ºäº†è®©æˆ‘ä»¬åŒºåˆ†ä»£ç æ‰§è¡Œçš„ä½ç½®ï¼ŒNuxtä¼šæŠŠæœåŠ¡å™¨æ‰§è¡Œçš„ä»£ç è¾“å‡ºåˆ°Nuxt SSRä¸­ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨çš„å·¥å…·ä¸­æŸ¥çœ‹

   æ¯”å¦‚ï¼Œæˆ‘ä»¬åœ¨é¡µé¢ä¸­æ·»åŠ createdç”Ÿå‘½å‘¨æœŸå‡½æ•°å¹¶è¾“å‡º

###### 2. process.server

â€‹      æœ‰äº›ä»£ç åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½ä¼šæ‰§è¡Œä¸€éï¼ŒbeforeCreated, created ç”Ÿæˆç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚

å¯¹äºæ—¢åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œåˆåœ¨å®¢æˆ·ç«¯æ‰§è¡Œçš„ä»£ç æ¥è¯´ï¼Œæœ‰æ—¶æˆ‘ä»¬å¯èƒ½åªå¸Œæœ›å®ƒåœ¨ç‰Ÿä¸€ç«¯æ‰§è¡Œï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨process.serveræ¥åˆ¤æ–­å½“å‰çš„ç¯å¢ƒï¼Œç„¶åé’ˆå¯¹ä¸åŒçš„ç¯å¢ƒæ‰§è¡Œä»£ç .



## 06.ä¸­é—´ä»¶

### å¸¦é—®é¢˜å­¦ä¸­é—´ä»¶

- ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶? å®ƒåœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ?
- ä»€ä¹ˆå…¨å±€ä¸­é—´ä»¶? ä»€ä¹ˆæ˜¯é¡µé¢ä¸­é—´ä»¶?
- å¦‚ä½•åˆ›å»ºä¸­é—´ä»¶
- å¦‚ä½•è®¾ç½®ä¸­é—´ä»¶ä¸ºå…¨å±€çš„
- å¦‚ä½•è®¾ç½®ä¸­é—´ä»¶ä¸ºå±€éƒ¨çš„
- åœ¨ä¸­é—´ä»¶ä¸­å¦‚ä½•åˆ¤æ–­å½“å‰è¿è¡Œçš„ç¯å¢ƒæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ç«¯

### 1.æ¦‚å¿µ

  å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼šåœ¨æ¯ä¸€æ¬¡è¯·æ±‚è·¯ç”±ä¹‹å‰è¢«æ‰§è¡Œ

### 2.åº”ç”¨åœºæ™¯

â€‹	 å¯ä»¥ç”¨æ¥åšæƒé™éªŒè¯ç­‰åŠŸèƒ½~

### 3.ä½¿ç”¨ä¸­é—´ä»¶æ³¨æ„äº‹é¡¹

- ä¸­é—´ä»¶ä¼šåœ¨å‰ç«¯åç«¯éƒ½æ‰§è¡Œï¼Œæ‰€ä»¥å†™ä»£ç æ—¶è¦åˆ¤æ–­ç¯å¢ƒ
- åªæœ‰å‰ç«¯èƒ½æ“ä½œæµè§ˆå™¨
- å¦‚æœåç«¯å±äºnodeç¯å¢ƒä¸èƒ½æ“ä½œæµè§ˆå™¨ï¼Œä¸èƒ½ä½¿ç”¨localStorageç­‰æµè§ˆå™¨ä¸“ç”¨çš„API
- ä¸­é—´ä»¶æ‰§è¡Œæµç¨‹é¡ºåºï¼š
  1. `nuxt.config.js`
  2. åŒ¹é…å¸ƒå±€
  3. åŒ¹é…é¡µé¢



### 4.åŸºç¡€æ¡ˆä¾‹æ¼”ç¤ºï¼š

![07-ä¸­é—´ä»¶æ¼”ç¤º](images/07-%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%BC%94%E7%A4%BA.gif)..



å®ç°æ€è·¯

1. åˆ›å»ºmiddlewareç›®å½•çš„åˆ›å»ºä¸‰ä¸ªxxx.jsæ–‡ä»¶ï¼Œæ‰“å°æ‰§è¡Œ
2. åˆ†åˆ«åº”ç”¨åœ¨å…¨å±€é…ç½®nuxt.config.js å¸ƒå±€æ–‡ä»¶ï¼Œé¡µé¢ç»„ä»¶ä¸­ä½¿ç”¨



ä»£ç å®ç°ï¼š

middleware/auth1.js

```javascript
export default () =>{
   //console.log('auth1ä¸­é—´ä»¶æ‰§è¡Œäº†');
    const server = process.server ? 'æœåŠ¡ç«¯':'å®¢æˆ·ç«¯';
    console.log(`auth2ä¸­é—´ä»¶æ‰§è¡Œåœ¨${server}`);
}
```

middleware/auth2.js

```javascript
export default () =>{
  // console.log('auth2ä¸­é—´ä»¶æ‰§è¡Œäº†');
   const server = process.server ? 'æœåŠ¡ç«¯':'å®¢æˆ·ç«¯';
    console.log(`auth2ä¸­é—´ä»¶æ‰§è¡Œåœ¨${server}`);
   
}
```

middleware/auth3.js

```javascript
export default () =>{
   //console.log('auth3ä¸­é—´ä»¶æ‰§è¡Œäº†');
    const server = process.server ? 'æœåŠ¡ç«¯':'å®¢æˆ·ç«¯';
    console.log(`auth2ä¸­é—´ä»¶æ‰§è¡Œåœ¨${server}`);
}
```



nuxt.config.js

```javascript
  router:{
    middleware:'auth1'
  },
```

layouts/default.vue

```vue
<template>
   <div>
       <h1>å¸ƒå±€æ–‡ä»¶</h1>
       <Nuxt/>
   </div>
</template>

<script>
export default {
  middleware:'auth2'
}
</script>
```

pages/index.vue

```vue
<template>
  <div>
    <div>home Page</div>
    <nuxt-link to="/about">åˆ‡æ¢å…³äºé¡µé¢</nuxt-link>
  </div>
</template>

<script>
export default {
  middleware: "auth3",
};
</script>
```



pages/about.vue

```vue
<template>
    <div>
        <h1>å…³äºé¡µé¢</h1>
        <nuxt-link to="/">å›åˆ°é¦–é¡µ</nuxt-link>
    </div>
</template>

<script>

```



æ€»ç»“ï¼š

1. ä¸­é—´ä»¶ï¼š åœ¨è®¿é—®ä¸€ä¸ªç»„ä»¶ä¹‹å‰è‡ªåŠ¨æ‰§è¡Œçš„å‡½æ•°
2. ä¸­é—´ä»¶çš„æ‰§è¡ŒèŒƒå›´æœ‰ä¸‰ç§:
   1. å…¨å±€æ‰§è¡Œï¼šåœ¨åŠ è½½æ‰€æœ‰çš„ç»„ä»¶ä¹‹å‰éƒ½ä¼šè¢«è‡ªåŠ¨è°ƒç”¨             --> éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®
   2. å¸ƒå±€æ–‡ä»¶æ‰§è¡Œï¼š åœ¨æŸäº›ç»„ä»¶åŠ è½½ä¹‹å‰ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œ            --> å†™å¸ƒå±€æ–‡ä»¶ä¸­å†™ä¸­é—´ä»¶
   3. å•ä¸ªæ–‡ä»¶æ‰§è¡Œï¼š åœ¨æŸä¸€ä¸ªç»„ä»¶åŠ è½½ä¹‹å‰ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œ       ---> ç›´æ¥å¸è½½è¿™ä¸ªæ–‡ä»¶ä¸­å³å¯
3. ä¸­é—´ä»¶çš„æ‰§è¡Œæ—¶æœºï¼šåœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯éƒ½ä¼šæ‰§è¡Œ
   1. æœåŠ¡ç«¯æ‰§è¡Œï¼šå½“æˆ‘ä»¬ç›´æ¥åœ¨æµè§ˆå™¨ä¸­åˆ·æ–°é¡µé¢ï¼Œç›´æ¥æ‰“è¿™ä¸ªé¡µé¢çš„è·¯å¾„æ—¶
   2. å®¢æˆ·ç«¯æ‰§è¡Œï¼šå½“ç‚¹å‡»é¡µé¢çš„æŒ‰é’®(nuxt-link)åˆ‡æ¢ç»„ä»¶æ—¶
4. ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ä¸­é—´: æƒé™éªŒè¯ç­‰

## 06.èµ„æºæ–‡ä»¶

### 1.ä½¿ç”¨css/htmlé¢„å¤„ç†å™¨

â€‹	 ç›®çš„ï¼šä¸ºäº†æ›´é«˜æ•ˆæˆ–è€…ç®€æ´çš„ç¼–å†™html, cssä»£ç ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨htmlæˆ–è€…cssé¢„å¤„ç†å™¨

   1.1 csså¸¸è§é¢„å¤„ç†ï¼š

- sass
- less
- stylus

  1.2 htmlé¢„å¤„ç†å™¨

-  pug



#### 1.1 æ¡ˆä¾‹æ¼”ç¤º(lessï¼‰

![image-20211003010825727](images/image-20211003010825727.png).

å®ç°æ€è·¯ï¼š

1.  yarn/npm å®‰è£…lessä¾èµ–åŒ…               
2. å®‰è£…@nuxtjs/style-resources
3. é…ç½®nuxt.config.js

 ä»£ç å®ç°ï¼š

1.å®‰è£…æŒ‡å®šç‰ˆæœ¬(nuxtå†…ç½®webpack4)

```javascript
yarn add less less-loader@7.3.0
```

2.åˆ›å»ºå…¬å…±ç±»åº“æ–‡ä»¶ assets/less/base.lessæ–‡ä»¶

```less
body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,
      Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji,
      Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    margin: 0;
    overflow-x: hidden;
    overflow-y: scroll;
  }
  
  main {
    margin: 0 auto;
    margin-top: 25vh;
    margin-bottom: 2rem;
    padding: 0 1rem;
    max-width: 1280px;
    text-align: center;
  }
  
  h1 {
    // ä½¿ç”¨å…¨å±€lesså˜é‡
    color: @secondary;
  }
  
```

3. åˆ›å»ºå…¨å±€å˜é‡æ–‡ä»¶assets/less/variables.less

```less
@primary:orangered;
@secondary:dodgerblue;
```

   4.å®‰è£…@nuxtjs/style-resources

```javascript
 yarn add -D @nuxtjs/style-resources
```

  5.é…ç½®nuxt.config.js

```javascript
css: ['~/assets/less/base.less'],  
 buildModules: [
    '@nuxtjs/style-resources'
  ],
  // global style resources é…ç½®å…¨å±€lesså˜é‡
  styleResources:{
     less:[ '~/assets/less/variables.less']
  },
```



#### 1.2.æ¡ˆä¾‹æ¼”ç¤º(scssï¼‰

![image-20211003011258197](images/image-20211003011258197.png).

å®ç°æ€è·¯

1. yarn/npm å®‰è£…scssä¾èµ–åŒ…    
   - æ–‡æ¡£åœ°å€: https://nuxtjs.org/docs/2.x/features/configuration#pre-processors
2. å®‰è£…@nuxtjs/style-resources 
3. é…ç½®nuxt.config.js

â€‹      

ä»£ç å®ç°ï¼š

1. åˆ›å»ºassets/scss/base.scss

   ```scss
   body {
       font-family: system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,
         Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji,
         Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
       margin: 0;
       overflow-x: hidden;
       overflow-y: scroll;
     }
     
     main {
       margin: 0 auto;
       margin-top: 25vh;
       margin-bottom: 2rem;
       padding: 0 1rem;
       max-width: 1280px;
       text-align: center;
     }
     
     h1 {
       color: $secondary; // ä½¿ç”¨scsså…¨å±€å˜é‡
     }
     
   ```

2. åˆ›å»ºassets/scss/variables.scss

   ```scss
   $primary:orangered;
   $secondary:dodgerblue;
   ```

3. é…ç½®nuxt.config.js

    å®‰è£…@nuxtjs/style-resources

    ```javascript
    yarn add -D @nuxtjs/style-resources
    ```

   é…ç½®nuxt.config.js

   ```javascript
    css: [
       '~/assets/less/base.less',
       '~/assets/scss/base.scss'
     ],
    buildModules: [
       '@nuxtjs/style-resources'
     ],
     // global style resources
     styleResources:{
        less:[
          '~/assets/less/variables.less'
        ],
        scss:[
          '~/assets/scss/variables.scss'
        ]
     },
   ```





#### 1.3 æ¡ˆä¾‹æ¼”ç¤º(pug)

![image-20211003011549727](images/image-20211003011549727.png).

â€‹	 pugï¼šæ˜¯htmlæ¨¡æ¿å¼•æ“ ï¼Œä½œç”¨æ˜¯è®©htmlä»£ç æ›´åŠ ç²¾ç®€

â€‹     

å®ç°æ€è·¯ï¼š

1.   ä½¿ç”¨npm/yarn å®‰è£…pug
2.   æŒ‡å®šhtmlæ ¼å¼  lang="pug"

   å®‰è£…pug

```javascript
 yarn add -D pug pug-plain-loader
```

â€‹     pugä½¿ç”¨ï¼š

```vue
<template lang="pug">
  div
    h1 Hello Nuxters! ğŸ‘‹
    p This page uses less add scss
</template>

<style lang="scss" scoped>
div {
  p {
    color: $secondary;
  }
}
</style>

```

### 2.assetsç›®å½•

  ç‰¹ç‚¹ï¼š

   - assetsç›®å½•ä¸‹çš„å›¾ç‰‡ï¼Œlessï¼Œscssç­‰èµ„æºä¼šè¢«webpackç¼–è¯‘ã€‚
   - è¡Œå†…æ ·å¼ä½¿ç”¨å›¾ç‰‡æ—¶ï¼Œä¸ä¼šè¢«webpackç¼–è¯‘ï¼Œéœ€è¦æ‰‹åŠ¨ä½¿ç”¨requireåŠ è½½å›¾ç‰‡

####  1.æ¡ˆä¾‹æ¼”ç¤º

![image-20211003013610561](images/image-20211003013610561.png).

  ä»£ç å®ç°

 ```vue
 <template>
   <div class="home">
     <h3>ä½¿ç”¨imgæ ‡ç­¾æ˜¾ç¤ºå›¾ç‰‡</h3>
     <img src="~/assets/imgs/1.jpg" alt="" />
     <h3>ä½¿ç”¨ç±»åæ˜¾ç¤ºå›¾ç‰‡</h3>
     <div class="pic"></div>
     <h3>ä½¿ç”¨è¡Œå†…æ ·å¼æ˜¾ç¤ºå›¾ç‰‡</h3>
     <div class="stylePic" :style="stylePic"></div>
   </div>
 </template>
 
 <script>
 export default {
   data() {
     return {
       stylePic: `background:url(${require("~/assets/imgs/3.jpg")})`,
     };
   },
 };
 </script>
 
 <style  scoped>
 img {
   width: 200px;
 }
 .pic {
   width: 200px;
   height: 200px;
   background: url(~/assets/imgs/2.jpg) no-repeat;
   background-size: contain;
 }
 .stylePic {
   width: 200px;
   height: 200px;
 }
 </style>
 ```



æ€»ç»“ï¼š

	  1. assetsç›®å½•ä¸‹çš„å›¾ç‰‡ï¼Œlessï¼Œscssç­‰èµ„æºä¼šè¢«webpackç¼–è¯‘ã€‚
	  2. è¡Œå†…æ ·å¼ä½¿ç”¨å›¾ç‰‡æ—¶ï¼Œä¸ä¼šè¢«webpackç¼–è¯‘ï¼Œéœ€è¦æ‰‹åŠ¨ä½¿ç”¨requireåŠ è½½å›¾ç‰‡

### 3.staticç›®å½•

   ç‰¹ç‚¹ï¼š

- åŠ è½½æ—¶èµ„æºæ—¶ç›¸å¯¹staticç›®å½•æ‰¾èµ„æºï¼Œ æ¯”å¦‚ï¼šåŠ è½½assetsç›®å½•ä¸‹çš„æ–‡ä»¶

  ```html
  <img src="1.png" />
  ```

- Nuxtç›´æ¥ä½¿ç”¨èµ„æºæ–‡ä»¶ï¼Œä¸åšä»»ä½•å¤„ç† 



####   1.æ¡ˆä¾‹æ¼”ç¤ºï¼š

![image-20211003014607922](images/image-20211003014607922.png).

ä»£ç å®ç°ï¼š

```vue
<template>
  <div class="home">
    <h3>ä½¿ç”¨imgæ ‡ç­¾æ˜¾ç¤ºå›¾ç‰‡</h3>
    <img src="imgs/1.jpg" alt="" />
    <h3>ä½¿ç”¨ç±»åæ˜¾ç¤ºå›¾ç‰‡</h3>
    <div class="pic"></div>
    <h3>ä½¿ç”¨è¡Œå†…æ¼”ç¤ºæ˜¾ç¤ºå›¾ç‰‡</h3>
    <div class="stylePic" :style="stylePic"></div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      stylePic: `background:url(${require("~/static/imgs/3.jpg")})`,
    };
  },
};
</script>

<style scoped>
img {
  width: 200px;
}
.pic {
  width: 200px;
  height: 200px;
  /* ç±»ååŠ è½½staticä¸‹çš„å›¾ç‰‡éœ€è¦è¡¥å…¨è·¯å¾„ */
  background: url(~/static/imgs/2.jpg) no-repeat;
  background-size: contain;
}
.stylePic {
  width: 200px;
  height: 200px;
}
</style>
```



æ€»ç»“ï¼šé¢„å¤„ç†å™¨ç®€åŒ–æˆ–è€…å¤ç”¨ä»£ç ï¼Œä½¿ç”¨é¢„å¤„ç†éœ€è¦å…ˆå®‰è£…å¯¹åº”çš„åŒ…

